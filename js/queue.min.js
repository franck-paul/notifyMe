'use strict';dotclear.notify_me = {queue:[],running:false,add(msg, title = null, silent = false) {dotclear.notify_me.queue.push({message:msg,title,silent,});},check() {if(dotclear.notify_me.running){return;}dotclear.notify_me.running = true;const list=document.querySelectorAll("[id^='notify_me_msg_']");if(list.length){list.forEach((elt)=>{let id=elt.getAttribute('id');if(id.match(/-data$/)){id = elt.getAttribute('id').substring(0, id.length-5);const msg=dotclear.getData(id);if(Object.keys(msg).length!==0&&msg.constructor===Object){dotclear.notify_me.add(msg.message, msg.title||null, msg.silent||false);}}});}const data=dotclear.getData('notify_me_msg');if(Object.keys(data).length!==0&&data.constructor===Object){dotclear.notify_me.add(data.message, data.title||null, data.silent||false);}if(dotclear.notify_me.queue.length){dotclear.notify_me.queue.forEach((elt)=>{notifyBrowser(elt.message, elt.title||null, elt.silent||false, dotclear.notify_me.config.wait);});dotclear.notify_me.queue = [];}dotclear.notify_me.running = false;},};window.addEventListener('load', ()=>{dotclear.notify_me.config = dotclear.getData('notify_me_config');setInterval(dotclear.notify_me.check, 100);});
